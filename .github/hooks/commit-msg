#!/bin/sh

# Conventional Commit pattern:
# <type>(optional scope): <description>
pattern='^(feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert)(\([a-zA-Z0-9_-]+\))?: .+'

commit_msg_file=$1
commit_msg=$(cat "$commit_msg_file")

if ! echo "$commit_msg" | grep -Eq "$pattern"; then
  echo "‚ùå Commit message does not follow Conventional Commits."
  echo "Expected format: <type>(optional scope): <description>"
  echo "Example: feat(queue): add throughput chart"
  exit 1
fi

exit 0
